{"version":3,"file":"angular2-elastic-input.umd.min.js","sources":["~/angular2-elastic-input/src/elastic-input.directive.ts","~/angular2-elastic-input/src/elastic-input.module.ts"],"sourcesContent":["import { ElementRef, HostListener, Directive, OnInit } from '@angular/core';\n\n@Directive({\n  selector: 'input[elastic-input]'\n})\nexport class ElasticInputDirective implements OnInit {\n  wrapper: HTMLElement;\n  mirror: HTMLElement;\n  content: any;\n\n  @HostListener('input', ['$event.target'])\n  onInput(): void {\n    this.update();\n  }\n\n  constructor(private element: ElementRef) {}\n\n  ngOnInit(): void {\n    this.wrapper = document.createElement('div');\n    this.wrapper.style.position = 'fixed';\n    this.wrapper.style.top = '-999px';\n    this.wrapper.style.left = '0';\n    document.body.appendChild(this.wrapper);\n\n    this.mirror = document.createElement('span');\n    this.mirror.style.whiteSpace = 'pre';\n\n    this.setMirrorStyle(this.mirror, this.element.nativeElement);\n\n    this.wrapper.appendChild(this.mirror);\n\n    this.update();\n  }\n\n  ngAfterContentChecked(): void {\n    this.update();\n  }\n\n  ngAfterViewChecked(): void {\n    this.update();\n  }\n\n  ngOnDestroy(): void {\n    this.mirror.remove();\n    this.wrapper.remove();\n  }\n\n  setMirrorStyle(mirror: HTMLElement, element: HTMLElement) {\n    const style = window.getComputedStyle(element);\n\n    [\n      'fontFamily',\n      'fontSize',\n      'fontWeight',\n      'fontStyle',\n      'letterSpacing',\n      'textTransform',\n      'wordSpacing'\n    ].forEach(value => {\n      mirror.style[value] = style[value];\n    });\n\n    mirror.style.paddingLeft = style.textIndent;\n\n    if (style.boxSizing === 'border-box') {\n      [\n        'paddingLeft',\n        'paddingRight',\n        'borderLeftStyle',\n        'borderLeftWidth',\n        'borderRightStyle',\n        'borderRightWidth'\n      ].forEach(value => {\n        mirror.style[value] = style[value];\n      });\n    } else if (style.boxSizing === 'padding-box') {\n      ['paddingLeft', 'paddingRight'].forEach(value => {\n        mirror.style[value] = style[value];\n      });\n    }\n  }\n\n  update() {\n    const domEl = this.element.nativeElement;\n    const value = domEl.value || domEl.placeholder;\n    if (this.content != value) {\n      this.content = value;\n    } else {\n      return;\n    }\n    this.mirror.innerText = value;\n    const delta = 1;\n    domEl.style.width = `${this.mirror.offsetWidth + delta}px`;\n  }\n}\n","import {NgModule, ModuleWithProviders} from '@angular/core';\nimport {ElasticInputDirective} from './elastic-input.directive';\n\n@NgModule({\n  declarations: [ElasticInputDirective],\n  exports: [ElasticInputDirective]\n})\nexport class ElasticInputModule {\n  static forRoot (): ModuleWithProviders {\n    return {\n      ngModule: ElasticInputModule\n    };\n  }\n}\n"],"names":["ElasticInputDirective","element","this","prototype","onInput","update","ngOnInit","wrapper","document","createElement","style","position","top","left","body","appendChild","mirror","whiteSpace","setMirrorStyle","nativeElement","ngAfterContentChecked","ngAfterViewChecked","ngOnDestroy","remove","window","getComputedStyle","forEach","value","paddingLeft","textIndent","boxSizing","domEl","placeholder","content","innerText","width","offsetWidth","decorators","type","Directive","args","selector","ctorParameters","ElementRef","propDecorators","HostListener","ElasticInputModule","forRoot","ngModule","NgModule","declarations","exports"],"mappings":"iQACA,IAAAA,EAAA,WAaA,SAAAA,EADsBC,GAAAC,KAAtBD,QAAsBA,SALtBD,EAAAG,UAAAC,QAAA,WACIF,KACKG,UAQTL,EAAAG,UAAAG,SAAA,WACIJ,KAHKK,QAAUC,SAASC,cAAc,OAItCP,KAHKK,QAAQG,MAAMC,SAAW,QAI9BT,KAHKK,QAAQG,MAAME,IAAM,SAIzBV,KAHKK,QAAQG,MAAMG,KAAO,IAI1BL,SAHSM,KAAKC,YAAYb,KAAKK,SAK/BL,KAHKc,OAASR,SAASC,cAAc,QAIrCP,KAHKc,OAAON,MAAMO,WAAa,MAK/Bf,KAHKgB,eAAehB,KAAKc,OAAQd,KAAKD,QAAQkB,eAK9CjB,KAHKK,QAAQQ,YAAYb,KAAKc,QAK9Bd,KAHKG,UAQTL,EAAAG,UAAAiB,sBAAA,WACIlB,KALKG,UAUTL,EAAAG,UAAAkB,mBAAA,WACInB,KAPKG,UAYTL,EAAAG,UAAAmB,YAAA,WACIpB,KATKc,OAAOO,SAUZrB,KATKK,QAAQgB,UAgBjBvB,EAAAG,UAAAe,eAAA,SAbGF,EAAAf,GAcC,IAbMS,EAAQc,OAAOC,iBAAiBxB,GAetC,CACE,aACA,WACA,aACA,YACA,gBACA,gBACA,eAZAyB,QAAQ,SAAAC,GAcRX,EAbON,MAAMiB,GAASjB,EAAMiB,KAgB9BX,EAbON,MAAMkB,YAAclB,EAAMmB,WAET,eAapBnB,EAbMoB,UAcR,CACE,cACA,eACA,kBACA,kBACA,mBACA,oBAZAJ,QAAQ,SAAAC,GAcRX,EAbON,MAAMiB,GAASjB,EAAMiB,KAED,gBAAxBjB,EAAUoB,WAcf,CAAC,cAbe,gBAAgBJ,QAAQ,SAAAC,GActCX,EAbON,MAAMiB,GAASjB,EAAMiB,MAoBpC3B,EAAAG,UAAAE,OAAA,WACI,IAfM0B,EAAQ7B,KAAKD,QAAQkB,cACrBQ,EAAQI,EAAMJ,OAASI,EAAMC,YAgBnC,GAAI9B,KAfK+B,SAAWN,EAepB,CACEzB,KAfK+B,QAAUN,EAmBjBzB,KAfKc,OAAOkB,UAAYP,EAiBxBI,EAfMrB,MAAMyB,MAAQjC,KAAQc,OAAOoB,YADrB,EAgBlB,SAxGA,GA2FOpC,EAAPqC,WAA2C,CAgB3C,CAfEC,KAAMC,EAAAA,UAAWC,KAAM,CAAA,CAgBvBC,SAfU,2BAIXzC,EAAD0C,eAAC,WAAA,MAAA,CAkBD,CAACJ,KAAMK,EAAAA,cAfA3C,EAAP4C,eAAgE,CAkBhExC,QAjBW,CAAA,CAAGkC,KAAMO,EAAAA,aAAcL,KAAM,CAAA,QAAU,CAAA,qBCpGlD,IAAAM,EAAA,WAAA,SAAAA,YAGGA,EAAHC,QACA,WACI,MADO,CAELC,SADUF,MALhB,GAQOA,EAAPT,WAA2C,CAE3C,CADEC,KAAMW,EAAAA,SAAUT,KAAM,CAAA,CAEtBU,aADc,CAAAlD,GAEdmD,QADS,CAAAnD,OAIV8C,EAADJ,eAAC,WAAA,MAAA"}
